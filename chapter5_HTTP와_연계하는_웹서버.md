# 5장 HTTP와 연계하는 웹 서버
## 서버 1대와 멀티 도메인
* `한 대의 서버` 에서 고객마다 다른 도메인을 가지고, 다른 사이트를 실행할 수 있다

## 가상 호스트
* 물리적으로는 서버가 1대지만 가상으로 여러 대가 있는 것처럼 설정이 가능
* 메인 호스트 & 메인 호스트를 제외한 나머지 호스트가 가상 호스트

### 이름 기반 가상 호스트
* HTTP/1.1 에서 지원
* 하나의 IP 주소당 여러 이름을 가지는 방식

> 여러 다른 도메인으로부터 동일한 IP 주소로 변경되기 때문에,
> 어느 쪽에서 수신이 되었는 지 식별 불가
> 따라서 Host 헤더 필드에서 `Host: <host>:<port>` 를 지정해야 한다

### IP 기반 가상 호스트
* 각 호스트 이름에 다른 `IP 주소` 혹은 `포트` 를 가지는 방식이다
* 도메인 이름당 전용 IP 주소가 필요하다

## 통신을 중계하는 프로그램
### 프록시(Proxy)
* 클라이언트로부터 받은 리퀘스트 URI를 변경하지 않고 리소스가 있는 서버에 전송
* 오리진 서버로부터 되돌아온 리스폰스 또한 프록시 서버를 경유해서 클라이언트에 반환
* 프록시 서버 여러 대 경유도 가능(::Via 헤더 필드::에 경유한 호스트 정보를 추가)

#### 사용 목적
* 캐시를 사용해서 네트워크 대역 등을 효율적으로 사용
* 조직 내에 특정 웹 사이트에 대한 액세스 제한, 엑세스 로그 획득

#### 캐싱 프록시
* 프록시 서버 상에 리소스 캐시를 보존

#### 투명 프록시
* 중계시 메시지 변경을 하지 않음 (↔ 비투과 프록시)

### 게이트웨이(Gateway)
* 프록시와 흡사, HTTP 통신을 통해 다른 프로토콜 통신을 가능하게 한다 (통역사 역할)
* 고유의 IP 주소 필요
* 클라이언트와 게이트웨이 사이를 암호화, 안전성 증가

### 터널(Tunnel)
* 다른 서버와의 통신 경로 확립
* 터널 자체는 HTTP 리퀘스트를 해석하지 않고 그 자체를 서버에 중계
* 방화벽, NAT, ACL 등 제한적인 네트워크에 대해 네트워크 링크를 생성
* [위키피디아 HTTP tunnel](https://en.wikipedia.org/wiki/HTTP_tunnel)

## 리소스를 보관하는 캐시
* 캐시란? 프록시 서버와 클라이언트의 로컬 디스크에 보관된 리소스의 사본을 가리킨다
* 같은 데이터를 매번 오리진 서버에 전달하지 않아도 되므로 통신량과 통신 시간 절약

### 캐시 유효기간
* 오리진 서버의 데이터 갱신, 클라이언트 측의 요구 혹은 캐시 유효 기간을 통해 오리진 서버의 새로은 리소스를 다시 획득

### 클라이언트 캐시
* 브라우저에서도 캐시를 가질 수 있다
* 오래된 경우 오리진 서버에서 다시 획득

## 퀴즈
1. 가상 호스트란 무엇인가요? 왜 가상 호스트를 사용할까요?
2. 프록시의 사용 목적은 무엇일까요?
3. 여러 다른 도메인으로부터 수신이 왔을 경우, 어떻게 프록시 서버에서 수신하며, 어떤 방법으로 수신자를 식별할까요? 
4. 투명 프록시와 비투과 프록시
5. 주변의 게이트웨이로는 또 무엇이 있을까요?
6. 캐시란 무엇이며 캐시의 장점은 무엇일까요?

## 궁금한 점
1. SSL 특성상 이름 기반 가상 호스트를 사용할 수 없다고 합니다. 왜 그런건가요?
